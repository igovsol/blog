= Neo4j Enterprise 3.3.0 is out, but you may have noticed that while still open source, you are going to have a harder time getting the enterprise package with it’s free open source license...
// See https://hubpress.gitbooks.io/hubpress-knowledgebase/content/ for information about the parameters.
// :hp-image: /covers/cover.png
:published_at: 2017-11-10
:hp-tags: Neo4j, GraphDatabase, Neo4j Enterprise
:linkattrs:
// :hp-alt-title: My English Title



Neo4j 3.3.0 has been released and it has some great improvements and updates. You can read about them in the https://neo4j.com/release-notes/neo4j-3-3-0/[3.3.0 release changelog , window="_blank"].   

In a nutshell - it is as awesome as ever, and this release has much to boast.  Neo4j Enterprise is still free under its open source license, however you may have noticed that you can no longer build the enterprise package binary from the source code or download the open source Enterprise package binary from dist.neo4j.org. Furthermore, if you use docker, you may have noticed https://github.com/neo4j/docker-neo4j-publish/commit/aa31654ee8544cd544b369d2646cf372086f7b70[you must now accept a 'commercial agreement’ before proceeding, window="_blank"].  

Neo4j Inc could attempt to take Neo4j closed source from its current point quite easily, but with ambitions of an IPO - it would be extremely risky maneuver that if backfired would be disastrous for Neo4j Inc’s business side.  

As a reference, look no further than mysql , or rather what we now call mariaDB - the more popular fork of MySQL, and you http://www.zdnet.com/article/open-source-mariadb-a-mysql-fork-challenges-oracle/[can see what could happen , window="_blank"].

It looks like Neo4j Inc does not want to tempt fate with a closed source move just yet.   Instead another path was taken which makes it very hard to get ahold of the enterprise packaged distributions with the AGPLv3 license. Are they testing the waters with this behavior?  I don’t know, but as a passionate advocate of both open source software and Neo4j - this doesn’t sit well with me.  

And these actions are not acceptable for our federal clients who have invested in adoption and use of Neo4j Enterprise under its open source license.    Luckily, we happen to be Neo4j developers as well as advocates and these moves simply don’t affect us or our federal clients at this point.  

Back to the core of this post.   So what has Neo4j Inc done to make it much harder for the community to get access of packaged Neo4j Enterprise distributions under it’s open source license?

Action 1:  The enterprise packaging build instructions were removed from the code base.   A few weeks ago, the enterprise packaging ‘instructions’ were removed from the code base.  Until 3.3.0 anyone could have checked out the Neo4j sourcecode from github, and run a few simple commands to build Neo4j enterprise distribution.   That’s not the case anymore however - unless you know what you are doing.

The packaging system simply provides the instructions on how to ‘build’ the Neo4j Enterprise distribution download, much like the instructions you get with your furniture you get at IKEA.    All the artifacts that are used to build neo4j-enterprise are still there and open source, but the instructions explaining how to  build the neo4j-enterprise distribution you download have disappeared.   Try running mvn install on the code base after 3.2 and you no longer have the enterprise Unix and windows distributions appear after the process completes.  

Action 2:  Neo4j Inc slipped a commercial license into their distribution site downloads that are used for docker and direct download of Neo4j Enterprise.    Many people were not even aware that you could download Neo4j Enterprise at dist.neo4j.org, but those who were using it and those who were using the official docker images that use the distribution were in for a surprise when they were forced to accept commercial terms in order to access the distributions.    These are the same people who didn't download from the advertised links on the Neo4j because they knew they were not under the AGPL license.

As copyright holders, Neo4j Inc has the right to add any license they want for the distributions they build and package themselves. Everyone else, like us, must always have the standard AGPL open source license if we are to package Neo4j Enterprise and make it available for download.   And that's exactly what we do.

Action 3: Neo4j Inc turned hazelcast ssl (causal cluster communication encryption) off by default and created a ‘proprietary module’ that turns it on.
This move was referenced in the Neo4j 3.3.0 change log.  They justified their actions with the following “Neo4j Enterprise Edition binaries now include new proprietary add-ons. Intra-cluster encryption is the first of these. Consequently Neo4j Enterprise Edition can no longer be distributed under a dual license but the source is still available under AGPLv3.”.

That is one way to say it.  Of course, they could have easily just provided a Neo4j Enterprise binary without the intra cluster encryption turned off under it’s AGPLv3 license and a binary with it turned on, but they didn’t.  Right now the only difference between the paid Neo4j Enterprise (commercial) binary and Neo4j Enterprise (open source) binary is this.  How many of you are actually using causal clustering in production?  

Look for yourself:  

https://github.com/neo4j/neo4j/blob/3.2/enterprise/causal-clustering/src/main/java/org/neo4j/causalclustering/discovery/HazelcastClientConnector.java[3.2 release code , window="_blank"] : The sslPolicy initialized in the code.

[source,java]
----
HazelcastClientConnector( Config config, LogProvider logProvider, SslPolicy sslPolicy,
            HostnameResolver hostnameResolver )
    {
        this.config = config;
        this.logProvider = logProvider;
        this.sslPolicy = sslPolicy;
        this.hostnameResolver = hostnameResolver;
    }
----    
    
https://github.com/neo4j/neo4j/blob/3.3/enterprise/causal-clustering/src/main/java/org/neo4j/causalclustering/discovery/HazelcastClientConnector.java[3.3 release code , window="_blank"]  :  The sslPolicy initialization has disapeared .
    
[source,java]
----
    HazelcastClientConnector( Config config, LogProvider logProvider, HostnameResolver hostnameResolver )
        {
            this.config = config;
            this.logProvider = logProvider;
            this.hostnameResolver = hostnameResolver;
        }
----

If you want causal clustering interserver encryption turned  back on, simply pay for a commercial package.  Or you could use the FISMA framework plugins we are open sourcing to do it for free.
    
These three seemingly minor actions effectively made it impossible to get Neo4j Enterprise under its free open source license from Neo4j Inc starting with 3.3.0.   
   
As a consulting company offering alternative software development and support for Neo4j Enterprise open source licenses - we had to package and provide a way for our federal clients to download the open source Enterprise distributions.   

As part of the Neo4j open source community, we’ve decided to absorb the costs and make these distributions available to the general public, not just US federal agencies.  We’ve setup a distribution site that can be used to download Neo4j Enterprise directly, or use with docker.   We will have docker images up soon as well complete with the AGPL licensed packages. 

You can download Neo4j Enterprise Distributions from our website at https://igovsol.com/downloads.html.   Federal agencies should email us at neo4j@igovsol.com to get their AWS GovCloud download links which should be whitelisted for most agencies.

If you are not happy with these moves, then please reach out to Neo4j Inc and voice your concerns.  As the community that made it what it is today, you have the ability to help keep their business units in line.

Feel free to contact me directly via email at jmsuhy@igovsol.com anytime if you have questions, comments, or just want to talk about Neo4j in general.  










